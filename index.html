<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ </title>
    <meta name="description" content="Ù„Ø¹Ø¨Ø© Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ - Ù„Ø¹Ø¨Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ù…ØªØ¹Ø© Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ ÙˆØ§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¹Ø§Ù…Ø© ">
    <meta name="keywords" content="Ù„Ø¹Ø¨Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©ØŒ Ø­Ø±ÙˆÙ Ø¹Ø±Ø¨ÙŠØ©ØŒ Ø­Ø±ÙˆÙ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŒ Ø£Ù„Ø¹Ø§Ø¨ Ù„ØºÙˆÙŠØ©ØŒ ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£Ø·ÙØ§Ù„ØŒ Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ">
    <meta name="author" content="Ø¹Ø¨Ø¯Ø§Ù„Ù„Ø·ÙŠÙ Ø®Ø§Ù„Ø¯">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div class="main-controls">
            <div class="left-controls">
                <!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© -->
                <button id="langToggle" class="control-btn">
                    <i class="fas fa-language"></i>
                    <span>English</span>
                </button>
                
                <!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ -->
                <button id="themeToggle" class="control-btn theme-toggle-btn">
                    <i class="fas fa-moon"></i>
                    <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ</span>
                </button>
            </div>
            
            <div class="right-controls">
                <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙƒØ¨ÙŠØ± ÙˆØ§Ù„ØªØµØºÙŠØ± -->
                <div class="zoom-controls">
                    <button id="zoomInBtn" class="control-btn zoom-btn">
                        <i class="fas fa-search-plus"></i>
                    </button>
                    <button id="zoomOutBtn" class="control-btn zoom-btn">
                        <i class="fas fa-search-minus"></i>
                    </button>
                </div>
                
                <!-- Ø²Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© -->
                <button id="helpBtn" class="control-btn help-btn">
                    <i class="fas fa-question-circle"></i>
                </button>
            </div>
        </div>

        <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© -->
        <div class="header">
            <h1 class="game-title" id="game-title"><i class="fas fa-chess-board"></i> <span>Ù„Ø¹Ø¨Ø©</span> Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ</h1>
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù„ÙˆÙ† -->
        <div class="controls-container">
            <div class="controls">
                <button class="color-btn green-btn" id="greenBtn"><i class="fas fa-paint-brush"></i> Ø§Ù„Ø£Ø®Ø¶Ø±</button>
                <button class="color-btn red-btn" id="redBtn"><i class="fas fa-paint-brush"></i> Ø§Ù„Ø£Ø­Ù…Ø±</button>
                <button class="color-btn cream-btn" id="creamBtn"><i class="fas fa-paint-brush"></i> Ø§Ù„Ø£ØµÙ„ÙŠ</button>
                <button class="color-btn reset-btn" id="resetBtn"><i class="fas fa-eraser"></i> Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
                <button class="color-btn random-btn" id="randomBtn"><i class="fas fa-random"></i> Ø­Ø±Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ</button>
                <button class="color-btn shuffle-btn" id="shuffleBtn"><i class="fas fa-sync-alt"></i> ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙˆÙ</button>
            </div>
        </div>

        <div class="status-text" id="statusText">
            Ø§Ø®ØªØ± Ù„ÙˆÙ†Ø§Ù‹ Ø«Ù… Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ù„ØªØºÙŠÙŠØ± Ù„ÙˆÙ†Ù‡Ø§
        </div>

        <div class="honeycomb-container">
            <div class="honeycomb">
                <!-- Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ - Ø£Ø­Ù…Ø± -->
                <div class="hex pink"></div>
                <div class="hex pink"></div>
                <div class="hex pink"></div>
                <div class="hex pink"></div>
                <div class="hex pink"></div>
                <div class="hex pink"></div>

                <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ - Ø­Ø±ÙˆÙ Ù…Ø¹ Ø®Ù„Ø§ÙŠØ§ Ø®Ø¶Ø±Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠÙ† -->
                <div class="hex green"></div>
                <div class="hex cream letter">Ø£</div>
                <div class="hex cream letter">Ø¨</div>
                <div class="hex cream letter">Øª</div>
                <div class="hex cream letter">Ø«</div>
                <div class="hex cream letter">Ø¬</div>
                <div class="hex green"></div>

                <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« - Ø­Ø±ÙˆÙ Ù…Ø¹ Ø®Ù„Ø§ÙŠØ§ Ø®Ø¶Ø±Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠÙ† -->
                <div class="hex green"></div>
                <div class="hex cream letter">Ø­</div>
                <div class="hex cream letter">Ø®</div>
                <div class="hex cream letter">Ø¯</div>
                <div class="hex cream letter">Ø°</div>
                <div class="hex cream letter">Ø±</div>
                <div class="hex green"></div>

                <!-- Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹ - Ø­Ø±ÙˆÙ Ù…Ø¹ Ø®Ù„Ø§ÙŠØ§ Ø®Ø¶Ø±Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠÙ† -->
                <div class="hex green"></div>
                <div class="hex cream letter">Ø²</div>
                <div class="hex cream letter">Ø³</div>
                <div class="hex cream letter">Ø´</div>
                <div class="hex cream letter">Øµ</div>
                <div class="hex cream letter">Ø¶</div>
                <div class="hex green"></div>

                <!-- Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³ - Ø­Ø±ÙˆÙ Ù…Ø¹ Ø®Ù„Ø§ÙŠØ§ Ø®Ø¶Ø±Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠÙ† -->
                <div class="hex green"></div>
                <div class="hex cream letter">Ø·</div>
                <div class="hex cream letter">Ø¸</div>
                <div class="hex cream letter">Ø¹</div>
                <div class="hex cream letter">Øº</div>
                <div class="hex cream letter">Ù</div>
                <div class="hex green"></div>

                <!-- Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³ - Ø­Ø±ÙˆÙ Ù…Ø¹ Ø®Ù„Ø§ÙŠØ§ Ø®Ø¶Ø±Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠÙ† -->
                <div class="hex green"></div>
                <div class="hex cream letter">Ù‚</div>
                <div class="hex cream letter">Ùƒ</div>
                <div class="hex cream letter">Ù„</div>
                <div class="hex cream letter">Ù…</div>
                <div class="hex cream letter">Ù†</div>
                <div class="hex green"></div>

                <!-- Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¨Ø¹ - Ø£Ø­Ù…Ø± -->
                <div class="hex pink"></div>
                <div class="hex pink"></div>
                <div class="hex pink"></div>
                <div class="hex pink"></div>
                <div class="hex pink"></div>
                <div class="hex pink"></div>
            </div>
        </div>

        <div class="game-stats">
            <div class="stat-box">
                <i class="fas fa-leaf"></i>
                <span id="greenCountLabel">Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡: <span id="greenCount">0</span></span>
            </div>
            <div class="stat-box">
                <i class="fas fa-fire"></i>
                <span id="redCountLabel">Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡: <span id="redCount">0</span></span>
            </div>
        </div>

        <!-- Ù…Ø±Ø¨Ø¹ Ø­ÙˆØ§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯ -->
        <div id="confirmDialog" class="confirm-dialog">
            <div class="dialog-content">
                <h3 id="confirmTitle">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</h3>
                <p id="confirmMessage">Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙˆÙ. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ</p>
                <div class="dialog-buttons">
                    <button id="confirmYes" class="dialog-btn yes-btn">Ù…ÙˆØ§ÙÙ‚</button>
                    <button id="confirmNo" class="dialog-btn no-btn">Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </div>
        </div>

        <!-- Ù…Ø±Ø¨Ø¹ Ø­ÙˆØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© -->
        <div id="helpDialog" class="help-dialog">
            <div class="help-content">
                <h3 id="helpTitle">ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h3>
                <div id="helpContent">
            <h4>ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h4>
        <p><strong>ÙƒÙŠÙÙŠØ© Ø§Ù„Ù„Ø¹Ø¨:</strong></p>
        <p><strong>Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø£ÙˆÙ„:</strong> ÙŠÙ‚ÙˆÙ… Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø§Ø®ØªÙŠØ§Ø± Ø­Ø±Ù Ø£ÙˆÙ„ Ø¹Ø´ÙˆØ§Ø¦ÙŠØŒ Ø«Ù… ÙŠØ·Ø±Ø­ Ø³Ø¤Ø§Ù„Ù‹Ø§ ÙŠØ¬Ø¨ Ø£Ù† ØªØ¨Ø¯Ø£ Ø¥Ø¬Ø§Ø¨ØªÙ‡ Ø¨Ø°Ù„Ùƒ Ø§Ù„Ø­Ø±Ù.</p>
        
        <p><strong>Ù‡Ø¯Ù ÙƒÙ„ ÙØ±ÙŠÙ‚:</strong></p>
        <ul>
            <li>ğŸŸ¥ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø± ÙŠØ³Ø¹Ù‰ Ù„ØªÙƒÙˆÙŠÙ† Ø®Ø· Ø¹Ù…ÙˆØ¯ÙŠ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø­Ù…Ø± ÙŠÙÙˆØ² Ø¨Ø§Ù„Ø¬ÙˆÙ„Ø© Ø¹Ù†Ø¯ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ø®Ø·.</li>
            <li>ğŸŸ© Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø®Ø¶Ø± ÙŠØ³Ø¹Ù‰ Ù„ØªÙƒÙˆÙŠÙ† Ø®Ø· Ø£ÙÙ‚ÙŠ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø± ÙŠÙÙˆØ² Ø¨Ø§Ù„Ø¬ÙˆÙ„Ø© Ø¹Ù†Ø¯ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ø®Ø·.</li>
        </ul>
        
        <p><strong>ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ø³Ø¤Ø§Ù„:</strong></p>
        <ul>
            <li>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø°ÙŠ ÙŠØ¶ØºØ· Ø§Ù„Ø¬Ø±Ø³ Ø£ÙˆÙ„Ù‹Ù‹Ø§ â³ Ù„Ø¯ÙŠÙ‡ 3 Ø«ÙˆØ§Ù†Ù Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©.</li>
            <li>âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© â†’ ØªØªÙ„ÙˆÙ† Ø§Ù„Ø®Ù„ÙŠØ© Ø¨Ù„ÙˆÙ† Ø§Ù„ÙØ±ÙŠÙ‚.</li>
            <li>âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© â†’ ÙŠÙ†ØªÙ‚Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¢Ø®Ø± Ù„Ù…Ø¯Ø© 10 Ø«ÙˆØ§Ù†Ù â³ØŒ Ø«Ù… ÙŠØµØ¨Ø­ Ù…ØªØ§Ø­Ù‹Ø§ Ù„Ù„Ø¬Ù…ÙŠØ¹ØŒ ÙˆØ¹Ù„Ù‰ Ù…Ù† ÙŠØ±ÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø±Ø³ Ø£ÙˆÙ„Ù‹Ø§.</li>
            <li>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ø­Ø±Ù ÙŠØ®ØªØ§Ø± Ø§Ù„Ø­Ø±Ù Ø§Ù„ØªØ§Ù„ÙŠ.</li>
        </ul>
        
        <p><strong>ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©:</strong></p>
        <ul>
            <li>ÙŠØªÙ… Ù„Ø¹Ø¨ 3 Ø¬ÙˆÙ„Ø§ØªØŒ ÙˆØ§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø°ÙŠ ÙŠÙÙˆØ² Ø¨Ø¬ÙˆÙ„ØªÙŠÙ† Ù‡Ùˆ Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©! ğŸ†</li>
        </ul>
        
        <h4>Ù…ÙŠØ²Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</h4>
        <ul>
            <li><strong>Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„:</strong> ÙŠØ¹ÙŠØ¯ ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø¥Ù„Ù‰ Ø­Ø§Ù„ØªÙ‡Ø§ Ø§Ù„Ø£ØµÙ„ÙŠØ©.</li>
            <li><strong>Ø­Ø±Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ:</strong> ÙŠØ¨Ø±Ø² Ø­Ø±ÙÙ‹Ø§ Ø¹Ø´ÙˆØ§Ø¦ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ù„Ù…Ø¯Ø© 3 Ø«ÙˆØ§Ù†Ù.</li>
            <li><strong>ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙˆÙ:</strong> ÙŠØ®Ù„Ø· Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„Ø­Ø±ÙˆÙ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø©.</li>
            <li><strong>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ:</strong> ÙŠØ¨Ø¯Ù„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙØ§ØªØ­Ø© ÙˆØ§Ù„Ø¯Ø§ÙƒÙ†Ø© Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ø¹ÙŠÙ†ÙŠÙ†.</li>
            <li><strong>ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©:</strong> ÙŠØ¨Ø¯Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©.</li>
            <li><strong>ØªÙƒØ¨ÙŠØ±/ØªØµØºÙŠØ±:</strong> ÙŠØªØ­ÙƒÙ… ÙÙŠ Ø­Ø¬Ù… Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ.</li>
        </ul>
        
        <h4>Ø­ÙˆÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©</h4>
        <p>ØªÙ… ØªØµÙ…ÙŠÙ… Ù„Ø¹Ø¨Ø© Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ Ù„ØªÙƒÙˆÙ† ØªØ¬Ø±Ø¨Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù…Ù…ØªØ¹Ø© Ù„Ù„ØµØºØ§Ø± ÙˆØ§Ù„ÙƒØ¨Ø§Ø±. ØªØ³Ø§Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù„Ù‰ ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ±ÙˆØ­ Ø§Ù„ÙØ±ÙŠÙ‚ Ø¨Ø·Ø±ÙŠÙ‚Ø© ØªÙ†Ø§ÙØ³ÙŠØ© Ù…Ù…ØªØ¹Ø©.</p>
                </div>
                <button id="closeHelpBtn" class="close-help-btn">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>

        <footer class="footer">
          Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ù„Ø¹Ø¨Ø© Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¹Ø¨Ø¯Ø§Ù„Ù„Ø·ÙŠÙ Ø®Ø§Ù„Ø¯ 2025 
        </footer>
    </div>

    <!-- Ø¥Ø¶Ø§ÙØ© Ù…Ù„ÙØ§Øª Ø§Ù„ØµÙˆØª -->
<!-- Ù‚Ù… Ø¨ØªØ¹Ù„ÙŠÙ‚ Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù…Ø¤Ù‚ØªØ§Ù‹ Ù„ØªØ¬Ù†Ø¨ Ø£Ø®Ø·Ø§Ø¡ 404 -->
<!--
<audio id="clickSound" src="sounds/click.mp3" preload="auto"></audio>
<audio id="successSound" src="sounds/success.mp3" preload="auto"></audio>
<audio id="errorSound" src="sounds/error.mp3" preload="auto"></audio>
<audio id="shuffleSound" src="sounds/shuffle.mp3" preload="auto"></audio>
<audio id="hintSound" src="sounds/hint.mp3" preload="auto"></audio>
-->

<script>
// ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
var currentColor = null;
var greenCellsCount = 0;
var redCellsCount = 0;
var highlightedCell = null;
var highlightTimeout = null;
var currentZoom = 1;

// Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø§Ù„Ù„ØºØªÙŠÙ†
var statusMessages = {
    'select-color': {
        'ar': 'Ø§Ø®ØªØ± Ù„ÙˆÙ†Ø§Ù‹ Ø«Ù… Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ù„ØªØºÙŠÙŠØ± Ù„ÙˆÙ†Ù‡Ø§',
        'en': 'Select a color then click on cells to change their color'
    },
    'green-selected': {
        'ar': 'Ø§Ø®ØªØ± Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ù„ØªÙ„ÙˆÙŠÙ†Ù‡Ø§ Ø¨Ø§Ù„Ø£Ø®Ø¶Ø±',
        'en': 'Select cells to color them green'
    },
    'red-selected': {
        'ar': 'Ø§Ø®ØªØ± Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ù„ØªÙ„ÙˆÙŠÙ†Ù‡Ø§ Ø¨Ø§Ù„Ø£Ø­Ù…Ø±',
        'en': 'Select cells to color them red'
    },
    'cream-selected': {
        'ar': 'Ø§Ø®ØªØ± Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ù„Ø¥Ø¹Ø§Ø¯ØªÙ‡Ø§ Ù„Ù„ÙˆÙ† Ø§Ù„Ø£ØµÙ„ÙŠ',
        'en': 'Select cells to reset them to original color'
    },
    'no-color-selected': {
        'ar': 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù„ÙˆÙ† Ø£ÙˆÙ„Ø§Ù‹',
        'en': 'Please select a color first'
    },
    'fixed-cell': {
        'ar': 'Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø«Ø§Ø¨ØªØ©',
        'en': 'Fixed cells cannot be changed'
    },
    'fixed-green-cell': {
        'ar': 'Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø«Ø§Ø¨ØªØ©',
        'en': 'Fixed cells cannot be changed'
    },
    'random-letter': {
        'ar': 'ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø­Ø±Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ! Ø³ÙŠØ®ØªÙÙŠ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†',
        'en': 'Random letter selected! Will disappear in 3 seconds'
    },
    'reset-done': {
        'ar': 'ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù„ÙˆØ§Ù†!',
        'en': 'All colors have been reset!'
    },
    'shuffle-done': {
        'ar': 'ØªÙ… ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙˆÙ Ø¨Ù†Ø¬Ø§Ø­!',
        'en': 'Letters have been shuffled successfully!'
    }
};

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
window.onload = function() {
    console.log("ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„");
    
    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø£Ø²Ø±Ø§Ø±
    setupDirectButtonHandlers();
    
    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø®Ù„Ø§ÙŠØ§
    setupCellHandlers();
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø­ÙÙˆØ¸ (Ø¥Ø°Ø§ ÙˆØ¬Ø¯)
    loadSavedProgress();
};

// Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø£Ø²Ø±Ø§Ø±
function setupDirectButtonHandlers() {
    // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù†
    var greenBtn = document.getElementById('greenBtn');
    var redBtn = document.getElementById('redBtn');
    var creamBtn = document.getElementById('creamBtn');
    var resetBtn = document.getElementById('resetBtn');
    var randomBtn = document.getElementById('randomBtn');
    var shuffleBtn = document.getElementById('shuffleBtn');
    var themeToggle = document.getElementById('themeToggle');
    var helpBtn = document.getElementById('helpBtn');
    var closeHelpBtn = document.getElementById('closeHelpBtn');
    var langToggle = document.getElementById('langToggle');
    var zoomInBtn = document.getElementById('zoomInBtn');
    var zoomOutBtn = document.getElementById('zoomOutBtn');
    
    // ØªØ¹ÙŠÙŠÙ† Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
    if (greenBtn) greenBtn.onclick = function() { setColor('green'); };
    if (redBtn) redBtn.onclick = function() { setColor('red'); };
    if (creamBtn) creamBtn.onclick = function() { setColor('cream'); };
    if (resetBtn) resetBtn.onclick = confirmReset;
    if (randomBtn) randomBtn.onclick = highlightRandomLetter;
    if (shuffleBtn) shuffleBtn.onclick = confirmShuffle;
    if (themeToggle) themeToggle.onclick = toggleDarkMode;
    if (helpBtn) helpBtn.onclick = showHelp;
    if (closeHelpBtn) closeHelpBtn.onclick = hideHelp;
    if (langToggle) langToggle.onclick = toggleLanguage;
    if (zoomInBtn) zoomInBtn.onclick = zoomIn;
    if (zoomOutBtn) zoomOutBtn.onclick = zoomOut;
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯
    var confirmYes = document.getElementById('confirmYes');
    var confirmNo = document.getElementById('confirmNo');
    
    if (confirmYes) confirmYes.onclick = handleConfirmYes;
    if (confirmNo) confirmNo.onclick = hideConfirmDialog;
    
    console.log("ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø£Ø²Ø±Ø§Ø±");
}

// Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø®Ù„Ø§ÙŠØ§
function setupCellHandlers() {
    var cells = document.querySelectorAll('.hex');
    
    cells.forEach(function(cell) {
        cell.onclick = function() {
            handleCellClick(cell);
        };
    });
    
    console.log("ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø®Ù„Ø§ÙŠØ§");
}

// ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ
function setColor(color) {
    currentColor = color;
    
    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¨ØµØ±ÙŠ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    document.getElementById('greenBtn').style.transform = '';
    document.getElementById('redBtn').style.transform = '';
    document.getElementById('creamBtn').style.transform = '';
    document.getElementById('greenBtn').style.boxShadow = '';
    document.getElementById('redBtn').style.boxShadow = '';
    document.getElementById('creamBtn').style.boxShadow = '';
    
    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ù„Ù„Ø²Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯
    if (color === 'green') {
        document.getElementById('greenBtn').style.transform = 'translateY(-3px)';
        document.getElementById('greenBtn').style.boxShadow = '0 0 0 3px var(--primary-dark)';
        updateStatus('green-selected');
    } else if (color === 'red') {
        document.getElementById('redBtn').style.transform = 'translateY(-3px)';
        document.getElementById('redBtn').style.boxShadow = '0 0 0 3px var(--secondary-dark)';
        updateStatus('red-selected');
    } else if (color === 'cream') {
        document.getElementById('creamBtn').style.transform = 'translateY(-3px)';
        document.getElementById('creamBtn').style.boxShadow = '0 0 0 3px #e0e0e0';
        updateStatus('cream-selected');
    }
    
    console.log("ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„ÙˆÙ†:", color);
}

// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ù„ÙŠØ©
function handleCellClick(cell) {
    if (!currentColor) {
        updateStatus('no-color-selected');
        return;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø«Ø§Ø¨ØªØ©
    if (cell.classList.contains('pink') && !cell.classList.contains('selected-green') && !cell.classList.contains('selected-red')) {
        updateStatus('fixed-cell');
        return;
    }
    
    if (cell.classList.contains('green') && !cell.classList.contains('selected-green') && !cell.classList.contains('selected-red')) {
        updateStatus('fixed-green-cell');
        return;
    }
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØºÙŠÙŠØ± ÙÙŠ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
    var oldGreen = cell.classList.contains('selected-green') ? 1 : 0;
    var oldRed = cell.classList.contains('selected-red') ? 1 : 0;
    var newGreen = currentColor === 'green' ? 1 : 0;
    var newRed = currentColor === 'red' ? 1 : 0;
    
    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØºÙŠÙŠØ±
    cell.classList.add('color-changing');
    
    // ØªØ£Ø®ÙŠØ± Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ£Ø«ÙŠØ±
    setTimeout(function() {
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
        cell.classList.remove('selected-green', 'selected-red');
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯
        if (currentColor === 'green') {
            cell.classList.add('selected-green');
        } else if (currentColor === 'red') {
            cell.classList.add('selected-red');
        }
        
        // Ø¥Ø²Ø§Ù„Ø© ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØºÙŠÙŠØ±
        cell.classList.remove('color-changing');
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
        greenCellsCount = greenCellsCount - oldGreen + newGreen;
        redCellsCount = redCellsCount - oldRed + newRed;
        
        updateCounters();
        
        // Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…
        saveProgress();
    }, 150);
}

// ØªØ­Ø¯ÙŠØ« Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø©
function updateStatus(message) {
    var statusText = document.getElementById('statusText');
    if (statusText) {
        // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‡ÙŠ Ø§Ø³Ù… Ù…ÙØªØ§Ø­ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        if (typeof message === 'string' && statusMessages[message]) {
            var currentLang = document.documentElement.getAttribute('lang') || 'ar';
            statusText.innerText = statusMessages[message][currentLang];
        } else {
            // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø©
            statusText.innerText = message;
        }
        
        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ­Ø¯ÙŠØ«
        statusText.classList.add('status-text-update');
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ£Ø«ÙŠØ± Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
        setTimeout(function() {
            statusText.classList.remove('status-text-update');
        }, 500);
    }
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
function updateCounters() {
    var greenCounter = document.getElementById('greenCount');
    var redCounter = document.getElementById('redCount');
    
    if (greenCounter) greenCounter.innerText = greenCellsCount;
    if (redCounter) redCounter.innerText = redCellsCount;
}

// ØªØ¸Ù„ÙŠÙ„ Ø­Ø±Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ
function highlightRandomLetter() {
    // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¸Ù„ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚
    if (highlightedCell) {
        highlightedCell.classList.remove('highlight', 'purple');
    }
    
    // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø³Ø§Ø¨Ù‚
    if (highlightTimeout) {
        clearTimeout(highlightTimeout);
    }
    
    // Ø§Ø®ØªÙŠØ§Ø± Ø­Ø±Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ
    var letterCells = document.querySelectorAll('.hex.letter');
    if (letterCells.length > 0) {
        var randomIndex = Math.floor(Math.random() * letterCells.length);
        highlightedCell = letterCells[randomIndex];
        
        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ¸Ù„ÙŠÙ„
        highlightedCell.classList.add('highlight', 'purple');
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        updateStatus('random-letter');
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ¸Ù„ÙŠÙ„ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
        highlightTimeout = setTimeout(function() {
            highlightedCell.classList.remove('highlight', 'purple');
            highlightedCell = null;
            updateStatus('select-color');
        }, 3000);
    }
}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
function toggleDarkMode() {
    var body = document.body;
    var isDarkMode = body.classList.contains('dark-mode');
    
    if (isDarkMode) {
        body.classList.remove('dark-mode');
        // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø§Ù„Ø²Ø± Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        var isArabic = document.documentElement.getAttribute('lang') === 'ar';
        document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i> <span>' + (isArabic ? 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ' : 'Dark Mode') + '</span>';
    } else {
        body.classList.add('dark-mode');
        // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø§Ù„Ø²Ø± Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        var isArabic = document.documentElement.getAttribute('lang') === 'ar';
        document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i> <span>' + (isArabic ? 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ' : 'Light Mode') + '</span>';
    }
    
    // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
    localStorage.setItem('darkMode', !isDarkMode ? 'enabled' : null);
}

// Ø·Ù„Ø¨ ØªØ£ÙƒÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
function confirmReset() {
    var confirmDialog = document.getElementById('confirmDialog');
    var confirmTitle = document.getElementById('confirmTitle');
    var confirmMessage = document.getElementById('confirmMessage');
    
    if (confirmDialog && confirmTitle && confirmMessage) {
        var isArabic = document.documentElement.getAttribute('lang') === 'ar';
        
        confirmTitle.innerText = isArabic ? 'ØªØ£ÙƒÙŠØ¯ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…Ø³Ø­' : 'Confirm Reset';
        confirmMessage.innerText = isArabic ? 'Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ' : 'All current progress will be erased. Are you sure?';
        confirmDialog.setAttribute('data-action', 'reset');
        confirmDialog.style.display = 'flex';
    }
}

// Ø·Ù„Ø¨ ØªØ£ÙƒÙŠØ¯ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙˆÙ
function confirmShuffle() {
    var confirmDialog = document.getElementById('confirmDialog');
    var confirmTitle = document.getElementById('confirmTitle');
    var confirmMessage = document.getElementById('confirmMessage');
    
    if (confirmDialog && confirmTitle && confirmMessage) {
        var isArabic = document.documentElement.getAttribute('lang') === 'ar';
        
        confirmTitle.innerText = isArabic ? 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©' : 'Confirm Action';
        confirmMessage.innerText = isArabic ? 'Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙˆÙ. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ' : 'All current progress will be erased and letters will be shuffled. Are you sure?';
        confirmDialog.setAttribute('data-action', 'shuffle');
        confirmDialog.style.display = 'flex';
    }
}

// Ø¥Ø®ÙØ§Ø¡ Ù…Ø±Ø¨Ø¹ Ø­ÙˆØ§Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯
function hideConfirmDialog() {
    var confirmDialog = document.getElementById('confirmDialog');
    if (confirmDialog) {
        confirmDialog.style.display = 'none';
    }
}

// Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
function handleConfirmYes() {
    var confirmDialog = document.getElementById('confirmDialog');
    var action = confirmDialog.getAttribute('data-action');
    
    hideConfirmDialog();
    
    if (action === 'reset') {
        resetAllCells();
    } else if (action === 'shuffle') {
        shuffleLetters();
        resetAllCells();
    }
}

// Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ù„Ø§ÙŠØ§
function resetAllCells() {
    var cells = document.querySelectorAll('.hex');
    
    cells.forEach(function(cell) {
        cell.classList.remove('selected-green', 'selected-red', 'highlight', 'purple', 'color-changing');
    });
    
    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
    greenCellsCount = 0;
    redCellsCount = 0;
    
    updateCounters();
    updateStatus('reset-done');
    
    // Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…
    saveProgress();
}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙˆÙ
function shuffleLetters() {
    // Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
    var arabicLetters = ['Ø£', 'Ø¨', 'Øª', 'Ø«', 'Ø¬', 'Ø­', 'Ø®', 'Ø¯', 'Ø°', 'Ø±', 'Ø²', 'Ø³', 'Ø´', 'Øµ', 'Ø¶', 'Ø·', 'Ø¸', 'Ø¹', 'Øº', 'Ù', 'Ù‚', 'Ùƒ', 'Ù„', 'Ù…', 'Ù†', 'Ùˆ', 'Ù‡', 'ÙŠ'];
    var englishLetters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
    
    // ØªØ­Ø¯ÙŠØ¯ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø­Ø±ÙˆÙ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù„ØºØ© Ø§Ù„ØµÙØ­Ø©
    var isArabic = document.documentElement.getAttribute('lang') === 'ar';
    var letters = isArabic ? arabicLetters.slice() : englishLetters.slice();
    
    // Ø®Ù„Ø· Ø§Ù„Ø­Ø±ÙˆÙ
    for (var i = letters.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var temp = letters[i];
        letters[i] = letters[j];
        letters[j] = temp;
    }
    
    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù…Ø®Ù„ÙˆØ·Ø©
    var letterCells = document.querySelectorAll('.hex.letter');
    letterCells.forEach(function(cell, index) {
        if (index < letters.length) {
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ø­Ø±ÙƒØ©
            cell.classList.add('shuffling');
            
            // ØªØ£Ø®ÙŠØ± ØªØºÙŠÙŠØ± Ø§Ù„Ù†Øµ
            setTimeout(function() {
                cell.innerText = letters[index];
                
                // Ø¥Ø²Ø§Ù„Ø© ØªØ£Ø«ÙŠØ± Ø§Ù„Ø­Ø±ÙƒØ©
                setTimeout(function() {
                    cell.classList.remove('shuffling');
                }, 500);
            }, 100);
        }
    });
    
    updateStatus('shuffle-done');
}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©
function toggleLanguage() {
    var html = document.documentElement;
    var isArabic = html.getAttribute('lang') === 'ar';
    
    if (isArabic) {
        // Ø§Ù„ØªØºÙŠÙŠØ± Ù…Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        html.setAttribute('lang', 'en');
        html.setAttribute('dir', 'ltr');
        
        // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø²Ø± Ø§Ù„Ù„ØºØ©
        document.getElementById('langToggle').innerHTML = '<i class="fas fa-language"></i> <span>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>';
        
        // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ø¹Ø§Ø¯ÙŠ
        var isDarkMode = document.body.classList.contains('dark-mode');
        document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i> <span>' + (isDarkMode ? 'Light Mode' : 'Dark Mode') + '</span>';
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
        document.querySelector('.game-title').innerHTML = '<i class="fas fa-chess-board"></i> <span>Letter</span> Honeycomb';
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø£Ø®Ø±Ù‰
        updateUITextsToEnglish();
        
        // ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø±ÙˆÙ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
        changeLettersToEnglish();
    } else {
        // Ø§Ù„ØªØºÙŠÙŠØ± Ù…Ù† Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        html.setAttribute('lang', 'ar');
        html.setAttribute('dir', 'rtl');
        
        // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø²Ø± Ø§Ù„Ù„ØºØ©
        document.getElementById('langToggle').innerHTML = '<i class="fas fa-language"></i> <span>English</span>';
        
        // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ø¹Ø§Ø¯ÙŠ
        var isDarkMode = document.body.classList.contains('dark-mode');
        document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i> <span>' + (isDarkMode ? 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ' : 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ') + '</span>';
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
        document.querySelector('.game-title').innerHTML = '<i class="fas fa-chess-board"></i> <span>Ù„Ø¹Ø¨Ø©</span> Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ';
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø£Ø®Ø±Ù‰
        updateUITextsToArabic();
        
        // ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø±ÙˆÙ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        changeLettersToArabic();
    }
    
    // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
    saveProgress();
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
function updateUITextsToArabic() {
    var elements = {
        'greenBtn': '<i class="fas fa-paint-brush"></i> Ø§Ù„Ø£Ø®Ø¶Ø±',
        'redBtn': '<i class="fas fa-paint-brush"></i> Ø§Ù„Ø£Ø­Ù…Ø±',
        'creamBtn': '<i class="fas fa-paint-brush"></i> Ø§Ù„Ø£ØµÙ„ÙŠ',
        'resetBtn': '<i class="fas fa-eraser"></i> Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„',
        'randomBtn': '<i class="fas fa-random"></i> Ø­Ø±Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ',
        'shuffleBtn': '<i class="fas fa-sync-alt"></i> ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙˆÙ',
        'statusText': 'Ø§Ø®ØªØ± Ù„ÙˆÙ†Ø§Ù‹ Ø«Ù… Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ù„ØªØºÙŠÙŠØ± Ù„ÙˆÙ†Ù‡Ø§',
        'helpTitle': 'ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©',
        'closeHelpBtn': 'Ø¥ØºÙ„Ø§Ù‚',
        'confirmTitle': 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©',
        'confirmMessage': 'Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ',
        'confirmYes': 'Ù…ÙˆØ§ÙÙ‚',
        'confirmNo': 'Ø¥Ù„ØºØ§Ø¡',
        'zoomInBtn': '<i class="fas fa-search-plus"></i>',
        'zoomOutBtn': '<i class="fas fa-search-minus"></i>'
    };
    
    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
    for (var id in elements) {
        var element = document.getElementById(id);
        if (element) {
            element.innerHTML = elements[id];
        }
    }
    
    // ØªØ­Ø¯ÙŠØ« ØªØ³Ù…ÙŠØ§Øª Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
    document.querySelector('.stat-box:first-child span').innerHTML = 'Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡: <span id="greenCount">' + greenCellsCount + '</span>';
    document.querySelector('.stat-box:last-child span').innerHTML = 'Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡: <span id="redCount">' + redCellsCount + '</span>';
    
    // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø§Ù„ØªØ°ÙŠÙŠÙ„
    document.querySelector('.footer').innerHTML = 'Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ù„Ø¹Ø¨Ø© Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ Ø¨ÙˆØ§Ø³Ø·Ø© Ø¹Ø¨Ø¯Ø§Ù„Ù„Ø·ÙŠÙ Ø®Ø§Ù„Ø¯ 2025';
    
    // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
    updateHelpContentToArabic();
    
    // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø²Ø± Ù…Ø³Ø§Ø¹Ø¯Ø©
    var helpBtn = document.getElementById('helpBtn');
    if (helpBtn) {
        helpBtn.setAttribute('title', 'ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©');
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø©
    updateStatus('select-color');
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
function updateUITextsToEnglish() {
    var elements = {
        'greenBtn': '<i class="fas fa-paint-brush"></i> Green',
        'redBtn': '<i class="fas fa-paint-brush"></i> Red',
        'creamBtn': '<i class="fas fa-paint-brush"></i> Original',
        'resetBtn': '<i class="fas fa-eraser"></i> Reset All',
        'randomBtn': '<i class="fas fa-random"></i> Random Letter',
        'shuffleBtn': '<i class="fas fa-sync-alt"></i> Shuffle Letters',
        'statusText': 'Select a color then click on cells to change their color',
        'helpTitle': 'Game Instructions',
        'closeHelpBtn': 'Close',
        'confirmTitle': 'Confirm Action',
        'confirmMessage': 'All current progress will be erased. Are you sure?',
        'confirmYes': 'Yes',
        'confirmNo': 'Cancel',
        'zoomInBtn': '<i class="fas fa-search-plus"></i>',
        'zoomOutBtn': '<i class="fas fa-search-minus"></i>'
    };
    
    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
    for (var id in elements) {
        var element = document.getElementById(id);
        if (element) {
            element.innerHTML = elements[id];
        }
    }
    
    // ØªØ­Ø¯ÙŠØ« ØªØ³Ù…ÙŠØ§Øª Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
    document.querySelector('.stat-box:first-child span').innerHTML = 'Green Cells: <span id="greenCount">' + greenCellsCount + '</span>';
    document.querySelector('.stat-box:last-child span').innerHTML = 'Red Cells: <span id="redCount">' + redCellsCount + '</span>';
    
    // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø§Ù„ØªØ°ÙŠÙŠÙ„
    document.querySelector('.footer').innerHTML = 'Â© All Rights Reserved - Letter Honeycomb Game by AbdulLatif Khaled 2025';
    
    // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
    updateHelpContentToEnglish();
    
    // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø²Ø± Ù…Ø³Ø§Ø¹Ø¯Ø©
    var helpBtn = document.getElementById('helpBtn');
    if (helpBtn) {
        helpBtn.setAttribute('title', 'Game Instructions');
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„Ø©
    updateStatus('select-color');
}

// ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
function updateHelpContentToArabic() {
    var helpContent = document.getElementById('helpContent');
    if (helpContent) {
        helpContent.innerHTML = `
<h4>ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h4>
        <p><strong>ÙƒÙŠÙÙŠØ© Ø§Ù„Ù„Ø¹Ø¨:</strong></p>
        <p><strong>Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø£ÙˆÙ„:</strong> ÙŠÙ‚ÙˆÙ… Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø§Ø®ØªÙŠØ§Ø± Ø­Ø±Ù Ø£ÙˆÙ„ Ø¹Ø´ÙˆØ§Ø¦ÙŠØŒ Ø«Ù… ÙŠØ·Ø±Ø­ Ø³Ø¤Ø§Ù„Ù‹Ø§ ÙŠØ¬Ø¨ Ø£Ù† ØªØ¨Ø¯Ø£ Ø¥Ø¬Ø§Ø¨ØªÙ‡ Ø¨Ø°Ù„Ùƒ Ø§Ù„Ø­Ø±Ù.</p>
        
        <p><strong>Ù‡Ø¯Ù ÙƒÙ„ ÙØ±ÙŠÙ‚:</strong></p>
        <ul>
            <li>ğŸŸ¥ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø± ÙŠØ³Ø¹Ù‰ Ù„ØªÙƒÙˆÙŠÙ† Ø®Ø· Ø¹Ù…ÙˆØ¯ÙŠ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø­Ù…Ø± ÙŠÙÙˆØ² Ø¨Ø§Ù„Ø¬ÙˆÙ„Ø© Ø¹Ù†Ø¯ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ø®Ø·.</li>
            <li>ğŸŸ© Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø®Ø¶Ø± ÙŠØ³Ø¹Ù‰ Ù„ØªÙƒÙˆÙŠÙ† Ø®Ø· Ø£ÙÙ‚ÙŠ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø± ÙŠÙÙˆØ² Ø¨Ø§Ù„Ø¬ÙˆÙ„Ø© Ø¹Ù†Ø¯ Ø§ÙƒÙ…Ø§Ù„ Ø§Ù„Ø®Ø·.</li>
        </ul>
        
        <p><strong>ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ø³Ø¤Ø§Ù„:</strong></p>
        <ul>
            <li>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø°ÙŠ ÙŠØ¶ØºØ· Ø§Ù„Ø¬Ø±Ø³ Ø£ÙˆÙ„Ù‹Ù‹Ø§ â³ Ù„Ø¯ÙŠÙ‡ 3 Ø«ÙˆØ§Ù†Ù Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©.</li>
            <li>âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© â†’ ØªØªÙ„ÙˆÙ† Ø§Ù„Ø®Ù„ÙŠØ© Ø¨Ù„ÙˆÙ† Ø§Ù„ÙØ±ÙŠÙ‚.</li>
            <li>âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© â†’ ÙŠÙ†ØªÙ‚Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¢Ø®Ø± Ù„Ù…Ø¯Ø© 10 Ø«ÙˆØ§Ù†Ù â³ØŒ Ø«Ù… ÙŠØµØ¨Ø­ Ù…ØªØ§Ø­Ù‹Ø§ Ù„Ù„Ø¬Ù…ÙŠØ¹ØŒ ÙˆØ¹Ù„Ù‰ Ù…Ù† ÙŠØ±ÙŠØ¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø±Ø³ Ø£ÙˆÙ„Ù‹Ø§.</li>
            <li>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ø­Ø±Ù ÙŠØ®ØªØ§Ø± Ø§Ù„Ø­Ø±Ù Ø§Ù„ØªØ§Ù„ÙŠ.</li>
        </ul>
        
        <p><strong>ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©:</strong></p>
        <ul>
            <li>ÙŠØªÙ… Ù„Ø¹Ø¨ 3 Ø¬ÙˆÙ„Ø§ØªØŒ ÙˆØ§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø°ÙŠ ÙŠÙÙˆØ² Ø¨Ø¬ÙˆÙ„ØªÙŠÙ† Ù‡Ùˆ Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©! ğŸ†</li>
        </ul>
        
        <h4>Ù…ÙŠØ²Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</h4>
        <ul>
            <li><strong>Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„:</strong> ÙŠØ¹ÙŠØ¯ ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ù„Ø§ÙŠØ§ Ø¥Ù„Ù‰ Ø­Ø§Ù„ØªÙ‡Ø§ Ø§Ù„Ø£ØµÙ„ÙŠØ©.</li>
            <li><strong>Ø­Ø±Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ:</strong> ÙŠØ¨Ø±Ø² Ø­Ø±ÙÙ‹Ø§ Ø¹Ø´ÙˆØ§Ø¦ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø© Ù„Ù…Ø¯Ø© 3 Ø«ÙˆØ§Ù†Ù.</li>
            <li><strong>ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø±ÙˆÙ:</strong> ÙŠØ®Ù„Ø· Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„Ø­Ø±ÙˆÙ ÙÙŠ Ø§Ù„Ù„ÙˆØ­Ø©.</li>
            <li><strong>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ:</strong> ÙŠØ¨Ø¯Ù„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙØ§ØªØ­Ø© ÙˆØ§Ù„Ø¯Ø§ÙƒÙ†Ø© Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ø¹ÙŠÙ†ÙŠÙ†.</li>
            <li><strong>ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©:</strong> ÙŠØ¨Ø¯Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©.</li>
            <li><strong>ØªÙƒØ¨ÙŠØ±/ØªØµØºÙŠØ±:</strong> ÙŠØªØ­ÙƒÙ… ÙÙŠ Ø­Ø¬Ù… Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ.</li>
        </ul>
        
        <h4>Ø­ÙˆÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©</h4>
        <p>ØªÙ… ØªØµÙ…ÙŠÙ… Ù„Ø¹Ø¨Ø© Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ Ù„ØªÙƒÙˆÙ† ØªØ¬Ø±Ø¨Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù…Ù…ØªØ¹Ø© Ù„Ù„ØµØºØ§Ø± ÙˆØ§Ù„ÙƒØ¨Ø§Ø±. ØªØ³Ø§Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù„Ù‰ ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ±ÙˆØ­ Ø§Ù„ÙØ±ÙŠÙ‚ Ø¨Ø·Ø±ÙŠÙ‚Ø© ØªÙ†Ø§ÙØ³ÙŠØ© Ù…Ù…ØªØ¹Ø©.</p>
        `;
    }
}
    // ØªØ­Ø¯ÙŠØ« Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
function updateHelpContentToEnglish() {
    var helpContent = document.getElementById('helpContent');
    if (helpContent) {
        helpContent.innerHTML = `
<h4>Game Instructions</h4>
        <p><strong>How to Play:</strong></p>
        <p><strong>First Letter:</strong> The competition manager randomly selects a starting letter, then asks a question that must be answered starting with that letter.</p>
        
        <p><strong>Objective of Each Team:</strong></p>
        <ul>
            <li>ğŸŸ¥ The Red team aims to form a vertical line in red color and wins the round upon completing the line.</li>
            <li>ğŸŸ© The Green team aims to form a horizontal line in green color and wins the round upon completing the line.</li>
        </ul>
        
        <p><strong>Determining the Question Winner:</strong></p>
        <ul>
            <li>The team that rings the bell first â³ has 3 seconds to answer.</li>
            <li>âœ… Correct Answer â†’ The cell is colored with the team's color.</li>
            <li>âŒ Wrong Answer â†’ The question is passed to the other team for 10 seconds â³, then becomes available to everyone. Whoever wants to answer must ring the bell first.</li>
            <li>The team that wins the letter chooses the next letter.</li>
        </ul>
        
        <p><strong>Determining the Competition Winner:</strong></p>
        <ul>
            <li>3 rounds are played, and the team that wins two rounds is the winner of the competition! ğŸ†</li>
        </ul>
        
        <h4>Additional Features</h4>
        <ul>
            <li><strong>Reset All:</strong> Resets all cells to their original state.</li>
            <li><strong>Random Letter:</strong> Highlights a random letter on the board for 3 seconds.</li>
            <li><strong>Shuffle Letters:</strong> Mixes the positions of the letters on the board.</li>
            <li><strong>Dark Mode:</strong> Toggles between light and dark interface for eye comfort.</li>
            <li><strong>Change Language:</strong> Switches between Arabic and English letters.</li>
            <li><strong>Zoom In/Out:</strong> Controls the size of the letter cells.</li>
        </ul>
        
        <h4>About the Game</h4>
        <p>Letter Honeycomb Game is designed to be an interactive and fun experience for young and old. The game helps enhance general knowledge and team spirit in an enjoyable competitive way.</p>
        `;
    }
}

// ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø±ÙˆÙ Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
function changeLettersToArabic() {
    var arabicLetters = ['Ø£', 'Ø¨', 'Øª', 'Ø«', 'Ø¬', 'Ø­', 'Ø®', 'Ø¯', 'Ø°', 'Ø±', 'Ø²', 'Ø³', 'Ø´', 'Øµ', 'Ø¶', 'Ø·', 'Ø¸', 'Ø¹', 'Øº', 'Ù', 'Ù‚', 'Ùƒ', 'Ù„', 'Ù…', 'Ù†', 'Ùˆ', 'Ù‡', 'ÙŠ'];
    var letterCells = document.querySelectorAll('.hex.letter');
    
    letterCells.forEach(function(cell, index) {
        if (index < arabicLetters.length) {
            cell.textContent = arabicLetters[index];
        }
    });
}

// ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø±ÙˆÙ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
function changeLettersToEnglish() {
    var englishLetters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
    var letterCells = document.querySelectorAll('.hex.letter');
    
    letterCells.forEach(function(cell, index) {
        if (index < englishLetters.length) {
            cell.textContent = englishLetters[index];
        }
    });
}

// ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙƒØ¨ÙŠØ± ÙˆØ§Ù„ØªØµØºÙŠØ±
function zoomIn() {
    if (currentZoom < 1.5) {
        currentZoom += 0.1;
        applyZoom();
    }
}

function zoomOut() {
    if (currentZoom > 0.5) {
        currentZoom -= 0.1;
        applyZoom();
    }
}

function applyZoom() {
    var honeycomb = document.querySelector('.honeycomb');
    var container = document.querySelector('.honeycomb-container');
    
    if (honeycomb && container) {
        honeycomb.style.transform = `scale(${currentZoom})`;
        
        // ØªØ¹Ø¯ÙŠÙ„ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø­Ø§ÙˆÙŠØ©
        var baseHeight = 540;
        container.style.height = `${baseHeight * currentZoom}px`;
    }
    
    // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
    saveProgress();
}

// Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø±Ø¨Ø¹ Ø­ÙˆØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
function showHelp() {
    var helpDialog = document.getElementById('helpDialog');
    if (helpDialog) {
        helpDialog.style.display = 'flex';
    }
}

// Ø¥Ø®ÙØ§Ø¡ Ù…Ø±Ø¨Ø¹ Ø­ÙˆØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
function hideHelp() {
    var helpDialog = document.getElementById('helpDialog');
    if (helpDialog) {
        helpDialog.style.display = 'none';
    }
}

// Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…
function saveProgress() {
    var gameState = {
        greenCells: [],
        redCells: [],
        darkMode: document.body.classList.contains('dark-mode'),
        language: document.documentElement.getAttribute('lang'),
        currentZoom: currentZoom
    };
    
    // Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ù„Ø§ÙŠØ§
    var cells = document.querySelectorAll('.hex');
    cells.forEach(function(cell, index) {
        if (cell.classList.contains('selected-green')) {
            gameState.greenCells.push(index);
        } else if (cell.classList.contains('selected-red')) {
            gameState.redCells.push(index);
        }
    });
    
    // Ø­ÙØ¸ ÙÙŠ localStorage
    try {
        localStorage.setItem('honeycombGameState', JSON.stringify(gameState));
    } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø¯Ù…:', error);
    }
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø­ÙÙˆØ¸
function loadSavedProgress() {
    try {
        var savedState = localStorage.getItem('honeycombGameState');
        if (!savedState) return;
        
        var gameState = JSON.parse(savedState);
        var cells = document.querySelectorAll('.hex');
        
        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ù„Ø§ÙŠØ§
        if (gameState.greenCells && Array.isArray(gameState.greenCells)) {
            gameState.greenCells.forEach(function(index) {
                if (index < cells.length) {
                    cells[index].classList.add('selected-green');
                    greenCellsCount++;
                }
            });
        }
        
        if (gameState.redCells && Array.isArray(gameState.redCells)) {
            gameState.redCells.forEach(function(index) {
                if (index < cells.length) {
                    cells[index].classList.add('selected-red');
                    redCellsCount++;
                }
            });
        }
        
        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø­Ø§Ù„Ø© Ø§Ù„ØªÙƒØ¨ÙŠØ±/Ø§Ù„ØªØµØºÙŠØ±
        if (gameState.currentZoom) {
            currentZoom = gameState.currentZoom;
            applyZoom();
        }
        
        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ
        if (gameState.darkMode) {
            document.body.classList.add('dark-mode');
            // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø²Ø± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ø¹Ø§Ø¯ÙŠ
            var isArabic = gameState.language === 'ar';
            document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i> <span>' + (isArabic ? 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ' : 'Light Mode') + '</span>';
        } else {
            document.body.classList.remove('dark-mode');
            // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø²Ø± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ/Ø§Ù„Ø¹Ø§Ø¯ÙŠ
            var isArabic = gameState.language === 'ar';
            document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i> <span>' + (isArabic ? 'Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ' : 'Dark Mode') + '</span>';
        }
        
        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù„ØºØ©
        if (gameState.language) {
            var currentLang = document.documentElement.getAttribute('lang');
            if (currentLang !== gameState.language) {
                document.documentElement.setAttribute('lang', gameState.language);
                document.documentElement.setAttribute('dir', gameState.language === 'ar' ? 'rtl' : 'ltr');
                
                // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙÙ‚Ù‹Ø§ Ù„Ù„ØºØ©
                if (gameState.language === 'ar') {
                    document.getElementById('langToggle').innerHTML = '<i class="fas fa-language"></i> <span>English</span>';
                    document.querySelector('.game-title').innerHTML = '<i class="fas fa-chess-board"></i> <span>Ù„Ø¹Ø¨Ø©</span> Ø®Ù„ÙŠØ© Ø§Ù„Ø­Ø±ÙˆÙ';
                    updateUITextsToArabic();
                    changeLettersToArabic();
                } else {
                    document.getElementById('langToggle').innerHTML = '<i class="fas fa-language"></i> <span>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>';
                    document.querySelector('.game-title').innerHTML = '<i class="fas fa-chess-board"></i> <span>Letter</span> Honeycomb';
                    updateUITextsToEnglish();
                    changeLettersToEnglish();
                }
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
        updateCounters();
        
    } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø­ÙÙˆØ¸:', error);
    }
}

// ØªÙ†ÙÙŠØ° Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
console.log("ØªÙ… ØªØ­Ù…ÙŠÙ„ ÙƒÙˆØ¯ JavaScript Ø¨Ù†Ø¬Ø§Ø­");
</script>

</body>
</html>
